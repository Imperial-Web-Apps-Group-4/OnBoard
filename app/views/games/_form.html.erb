<div>
  <br/>
  <div class="field" id="image_upload">
    <%= label_tag :image, 'Add image: ' %>
    <%= file_field_tag :image %>
  </div>
  <p>Max size 10MB</p>
  <br/>
  <%= form_for(game) do |f| %>
      <% if game.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(game.errors.count, "error") %> prohibited this game from being saved:</h2>

            <ul>
              <% game.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
              <% end %>
            </ul>
          </div>
      <% end %>

      <div class="field">
        <%= f.label :name %>
        <%= f.text_field :name %>
      </div>

      <div class="field">
        <%= f.hidden_field :state %>
      </div>

      <div class="actions">
        <%= f.submit %>
      </div>
  <% end %>

</div>

<script>
    var images = [];
    $('#image_upload').dmUploader({
        url: '/games/new_image',
        onUploadSuccess: function(id, data){
            if (data.error !== undefined) {
                console.log("Upload failed!");
            } else {
                console.log('Succefully uploaded image ' + id + ' to hash: ' + data.id);
            }
        }
    });
</script>
